<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.23.0/dist/phaser.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/lodash.js/1.3.0/lodash.min.js"></script>
</head>
<body>

    <script>
    var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        backgroundColor: '#ff00ff',
        scene: {
            preload: preload,
            create: create
        }
    };

    var game = new Phaser.Game(config);

    function preload ()
    {
        this.load.image('blackRook', 'assets/blackRook.png');
        this.load.image('blackKnight', 'assets/blackKnight.png');
        this.load.image('blackBishop', 'assets/blackBishop.png');
        this.load.image('blackQueen', 'assets/blackQueen.png');
        this.load.image('blackKing', 'assets/blackKing.png');
        this.load.image('blackPawn', 'assets/blackPawn.png');

        this.load.image('whiteRook', 'assets/whiteRook.png');
        this.load.image('whiteKnight', 'assets/whiteKnight.png');
        this.load.image('whiteBishop', 'assets/whiteBishop.png');
        this.load.image('whiteQueen', 'assets/whiteQueen.png');
        this.load.image('whiteKing', 'assets/whiteKing.png');
        this.load.image('whitePawn', 'assets/whitePawn.png');
        
    }

    function create ()
    {
        setupBackgroundSquares(this);
        setupPieces(this);
    }


    function setupBackgroundSquares(scene)
    {
        const xSize = 50;
        const ySize = 50;

        for (let x = 0; x < 8; ++x) 
        {
            for (let y = 0; y < 8; ++y)
            {
                const color = (((x + y) % 2) == 0) ? 0xffffff : 0x000000; 
                const coordinates = coordinatesForPiece(x, y);
                scene.add.rectangle(coordinates.x, coordinates.y, 50, 50, color);
            }

        }
    }

    function setupPieces(scene)
    {
        const blackRook1Coordinates = coordinatesForPiece(0, 0);
        scene.add.sprite(blackRook1Coordinates.x, blackRook1Coordinates.y, 'blackRook');
        const blackKnight1Coordinates = coordinatesForPiece(1, 0);
        scene.add.sprite(blackKnight1Coordinates.x, blackKnight1Coordinates.y, 'blackKnight');
        const blackBishop1Coordinates = coordinatesForPiece(2, 0);
        scene.add.sprite(blackBishop1Coordinates.x, blackBishop1Coordinates.y, 'blackBishop');
        const blackQueenCoordinates = coordinatesForPiece(3, 0);
        scene.add.sprite(blackQueenCoordinates.x, blackQueenCoordinates.y, 'blackQueen');
        const blackKingCoordinates = coordinatesForPiece(4, 0);
        scene.add.sprite(blackKingCoordinates.x, blackKingCoordinates.y, 'blackKing');
        const blackBishop2Coordinates = coordinatesForPiece(5, 0);
        scene.add.sprite(blackBishop2Coordinates.x, blackBishop2Coordinates.y, 'blackBishop');
        const blackKnight2Coordinates = coordinatesForPiece(6, 0);
        scene.add.sprite(blackKnight2Coordinates.x, blackKnight2Coordinates.y, 'blackKnight');
        const blackRook2Coordinates = coordinatesForPiece(7, 0);
        scene.add.sprite(blackRook2Coordinates.x, blackRook2Coordinates.y, 'blackRook');
        for (const x in _.range(8))
        {
            const blackPawnCoordinates = coordinatesForPiece(x, 1);
            scene.add.sprite(blackPawnCoordinates.x, blackPawnCoordinates.y, 'blackPawn');
        }

        const whiteRook1Coordinates = coordinatesForPiece(0, 7);
        scene.add.sprite(whiteRook1Coordinates.x, whiteRook1Coordinates.y, 'whiteRook');
        const whiteKnight1Coordinates = coordinatesForPiece(1, 7);
        scene.add.sprite(whiteKnight1Coordinates.x, whiteKnight1Coordinates.y, 'whiteKnight');
        const whiteBishop1Coordinates = coordinatesForPiece(2, 7);
        scene.add.sprite(whiteBishop1Coordinates.x, whiteBishop1Coordinates.y, 'whiteBishop');
        const whiteQueenCoordinates = coordinatesForPiece(3, 7);
        scene.add.sprite(whiteQueenCoordinates.x, whiteQueenCoordinates.y, 'whiteQueen');
        const whiteKingCoordinates = coordinatesForPiece(4, 7);
        scene.add.sprite(whiteKingCoordinates.x, whiteKingCoordinates.y, 'whiteKing');
        const whiteBishop2Coordinates = coordinatesForPiece(5, 7);
        scene.add.sprite(whiteBishop2Coordinates.x, whiteBishop2Coordinates.y, 'whiteBishop');
        const whiteKnight2Coordinates = coordinatesForPiece(6, 7);
        scene.add.sprite(whiteKnight2Coordinates.x, whiteKnight2Coordinates.y, 'whiteKnight');
        const whiteRook2Coordinates = coordinatesForPiece(7, 7);
        scene.add.sprite(whiteRook2Coordinates.x, whiteRook2Coordinates.y, 'whiteRook');
        for (const x in _.range(8))
        {
            const whitePawnCoordinates = coordinatesForPiece(x, 6);
            scene.add.sprite(whitePawnCoordinates.x, whitePawnCoordinates.y, 'whitePawn');
        }
    }

    function coordinatesForPiece(x, y)
    {
        const xOffset = 50;
        const yOffset = 50;
        const xSpacing = 50;
        const ySpacing = 50;
        
        return {x: xOffset + xSpacing * x, 
                y: yOffset + ySpacing * y};
    }

    </script>

</body>
</html>